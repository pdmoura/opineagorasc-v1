<!doctype html>
<html lang="pt-BR">
	<head>
		<%- include('../partials/head', { 
			title: 'Dashboard Admin - Opine Agora SC',
			description: 'Painel administrativo do portal Opine Agora SC',
			image: '',
			url: 'http://localhost:3000/admin'
		}) %>
		<link rel="stylesheet" href="/css/components.css" />
		<link rel="stylesheet" href="/css/blocks.css" />
		<link rel="stylesheet" href="/css/admin.css" />
		<link rel="stylesheet" href="/css/admin-dashboard.css" />
	</head>
	<body class="admin-page" style="opacity: 0; transition: opacity 0.3s ease-in-out;">
		<!-- ADMIN HEADER -->
		<header class="admin-header">
			<div class="admin-header-content">
				<a href="/admin" class="admin-logo">
					<div class="admin-logo-text">
						<span class="logo-opine">OPINE</span>
						<span class="logo-agora">AGORA</span>
						<span class="logo-sc">SC</span>
					</div>
				</a>

				<div class="admin-user-info">
					<div class= "admin-user-details">
						<div class="admin-user-name">Cristiano Soares</div>
						<div class="admin-user-role">Editor-chefe</div>
					</div>
					<div class="admin-avatar">CS</div>
					<button class="btn-logout" id="logoutBtn">
						Sair
					</button>
				</div>
			</div>
		</header>

		<!-- ADMIN CONTAINER -->
		<div class="admin-container">
			<div class="admin-welcome">
				<h1>ğŸ›ï¸ Painel Administrativo</h1>
				<p>Gerencie postagens, anÃºncios e conteÃºdo do site</p>
			</div>

			<!-- ADMIN TABS -->
			<div class="admin-tabs">
				<button
					class="admin-tab active"
					data-tab="tabNewPost"
				>
					â• Nova Postagem
				</button>
				<button class="admin-tab" data-tab="tabNewAd">
					ğŸ“¢ Novo AnÃºncio
				</button>
				<button
					class="admin-tab"
					data-tab="tabManage"
				>
					ğŸ“‹ Gerenciar
				</button>
				<button class="admin-tab" data-tab="tabComments">
					ğŸ’¬ ComentÃ¡rios
				</button>
			</div>

			 			<!-- TAB: Nova Postagem -->
			<div class="tab-content active" id="tabNewPost">
				<form id="postForm">
					<input type="hidden" id="editPostId" value="" />

					<div class="form-group">
						<label>TÃ­tulo da NotÃ­cia</label>
						<input
							type="text"
							id="postTitle"
							placeholder="Digite o tÃ­tulo da matÃ©ria..."
							required
						/>
					</div>

					<div class="form-row">
						<div class="form-group">
							<label>Categoria</label>
							<select id="postCategory" required>
								<option value="">Selecione...</option>
								<option value="PolÃ­tica">PolÃ­tica</option>
								<option value="Economia">Economia</option>
								<option value="EducaÃ§Ã£o">EducaÃ§Ã£o</option>
								<option value="SaÃºde">SaÃºde</option>
								<option value="Esporte">Esporte</option>
								<option value="Cultura">Cultura</option>
								<option value="OpiniÃ£o">OpiniÃ£o</option>
							</select>
						</div>

						<div class="form-group">
							<label>Autor</label>
							<input
								type="text"
								id="postAuthor"
								value="Cristiano Soares"
								required
							/>
						</div>
					</div>

					<div class="form-group">
						<label>Resumo / SubtÃ­tulo</label>
						<input
							type="text"
							id="postExcerpt"
							placeholder="Breve resumo da notÃ­cia..."
							required
						/>
					</div>

					<div class="form-group">
						<label>ConteÃºdo (Blocos)</label>
						<div class="block-toolbar">
							<button
								type="button"
								class="btn-block-add"
								data-block-type="capa"
							>
								ğŸ“· Capa
							</button>
							<button
								type="button"
								class="btn-block-add"
								data-block-type="imageText"
							>
								ğŸ–¼ï¸ Img+Texto
							</button>
							<button
								type="button"
								class="btn-block-add"
								data-block-type="fullImage"
							>
								ğŸ–¼ï¸ Img Full
							</button>
							<button
								type="button"
								class="btn-block-add"
								data-block-type="video"
							>
								ğŸ¥ VÃ­deo
							</button>
							<button
								type="button"
								class="btn-block-add"
								data-block-type="text"
							>
								ğŸ“ Texto
							</button>
							<button
								type="button"
								class="btn-block-add"
								data-block-type="button"
							>
								ğŸ”˜ BotÃ£o
							</button>
							<button
								type="button"
								class="btn-block-add"
								data-block-type="ad"
							>
								ğŸ“¢ AnÃºncio
							</button>
						</div>

						<div id="blocksContainer" class="blocks-container">
							<!-- Blocks will be injected here -->
						</div>
					</div>

					<div class="form-actions">
						<button
							type="button"
							class="btn-preview"
							id="previewBtn"
						>
							ğŸ‘ï¸ Visualizar PrÃ©via
						</button>
						<button
							type="submit"
							class="btn-primary"
							id="postSubmitBtn"
						>
							ğŸ“ Publicar NotÃ­cia
						</button>
					</div>
				</form>
			</div>

			<!-- TAB: Novo AnÃºncio -->
			<div class="tab-content" id="tabNewAd">
				<form id="adForm">
					<input type="hidden" id="editAdId" value="" />

					<div class="form-group">
						<label>TÃ­tulo do AnÃºncio</label>
						<input
							type="text"
							id="adTitle"
							placeholder="Ex: Vende-se apartamento..."
							required
						/>
					</div>

					<div class="form-group">
						<label>DescriÃ§Ã£o</label>
						<textarea
							id="adDescription"
							placeholder="Detalhes do anÃºncio..."
							required
						></textarea>
					</div>

					<div class="form-row">
						<div class="form-group">
							<label>Contato</label>
							<input
								type="text"
								id="adContact"
								placeholder="Telefone ou WhatsApp"
								required
							/>
						</div>

						<div class="form-group">
							<label>Categoria</label>
							<select id="adCategory">
								<option value="ImÃ³veis">ImÃ³veis</option>
								<option value="VeÃ­culos">VeÃ­culos</option>
								<option value="Empregos">Empregos</option>
								<option value="ServiÃ§os">ServiÃ§os</option>
								<option value="Diversos">Diversos</option>
							</select>
						</div>
					</div>

					<div class="form-group">
						<label>Imagem (URL)</label>
						<input
							type="url"
							id="adImage"
							placeholder="https://exemplo.com/imagem.jpg"
						/>
						<img
							id="adImagePreview"
							class="image-preview"
							alt="Preview"
						/>
					</div>

					<button
						type="submit"
						class="btn-primary btn-orange"
						id="adSubmitBtn"
					>
						ğŸ“¢ Publicar AnÃºncio
					</button>
				</form>
			</div>

			<!-- TAB: Gerenciar -->
			<div class="tab-content" id="tabManage">
				<h4
					style="
						font-family: &quot;Montserrat&quot;, sans-serif;
						font-size: 0.9rem;
						font-weight: 700;
						margin-bottom: 16px;
						color: var(--teal-primary);
					"
				>
					ğŸ“° NotÃ­cias Publicadas
				</h4>
				<div class="admin-post-list" id="adminPostList">
					<!-- Populated by JS -->
				</div>

				<h4
					style="
						font-family: &quot;Montserrat&quot;, sans-serif;
						font-size: 0.9rem;
						font-weight: 700;
						margin: 28px 0 16px;
						color: var(--orange-warm);
					"
				>
					ğŸ“¢ AnÃºncios Publicados
				</h4>
				<div class="admin-post-list" id="adminAdList">
					<!-- Populated by JS -->
				</div>
			</div>

			<!-- TAB: ComentÃ¡rios -->
			<div class="tab-content" id="tabComments">
				<h3 style="font-family: 'Montserrat', sans-serif; font-size: 1.2rem; margin-bottom: 20px; color: var(--text-primary);">
					ğŸ’¬ ModeraÃ§Ã£o de ComentÃ¡rios
				</h3>
				
				<h4 style="color: #d97706; margin-bottom: 12px; font-family: 'Montserrat', sans-serif; font-size: 1rem; font-weight: 600;">
					â³ Pendentes (Aguardando AprovaÃ§Ã£o)
				</h4>
				<div id="adminPendingComments" style="margin-bottom: 40px;">
					<!-- Populated by JS -->
				</div>

				<h4 style="color: var(--teal-primary); margin-bottom: 12px; font-family: 'Montserrat', sans-serif; font-size: 1rem; font-weight: 600;">
					âœ… Publicados (Aprovados)
				</h4>
				<div id="adminApprovedComments">
					<!-- Populated by JS -->
				</div>
			</div>
		</div>

		<!-- PREVIEW MODAL -->
		<div class="preview-modal" id="previewModal">
			<div class="preview-content">
				<div class="preview-header">
					<h3>ğŸ‘ï¸ VisualizaÃ§Ã£o PrÃ©via</h3>
					<button class="preview-close" id="previewCloseBtn">
						âœ•
					</button>
				</div>
				<div class="preview-body" id="previewContainer">
					<!-- Preview will be rendered here -->
				</div>
			</div>
		</div>

		<!-- TOAST -->
		<div class="toast" id="toast"></div>

		<% if (typeof isDev !== 'undefined' && isDev) { %>
			<script type="module" src="http://localhost:5173/@vite/client"></script>
			<script type="module" src="http://localhost:5173/js/main-admin.js"></script>
		<% } else { %>
			<script type="module" src="/dist/js/main-admin.js"></script>
		<% } %>
	</body>
</html>
