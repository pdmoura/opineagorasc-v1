<!doctype html>
<html lang="pt-BR">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Dashboard Admin - Opine Agora SC</title>

		<link rel="stylesheet" href="css/main.css" />
		<link rel="stylesheet" href="css/components.css" />
		<link rel="stylesheet" href="css/blocks.css" />
		<link rel="stylesheet" href="css/admin.css" />
		<link rel="stylesheet" href="css/admin-dashboard.css" />
		<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/dist/umd/supabase.min.js"></script>
	</head>
	<body class="admin-page">
		<!-- ADMIN HEADER -->
		<header class="admin-header">
			<div class="admin-header-content">
				<a href="/admin" class="admin-logo">
					<div class="admin-logo-text">
						<span class="logo-opine">OPINE</span>
						<span class="logo-agora">AGORA</span>
						<span class="logo-sc">SC</span>
					</div>
				</a>

				<div class="admin-user-info">
					<div class="admin-user-details">
						<div class="admin-user-name">Cristiano Soares</div>
						<div class="admin-user-role">Editor-chefe</div>
					</div>
					<div class="admin-avatar">CS</div>
					<button class="btn-logout" onclick="adminLogout()">
						Sair
					</button>
				</div>
			</div>
		</header>

		<!-- ADMIN CONTAINER -->
		<div class="admin-container">
			<div class="admin-welcome">
				<h1>ğŸ›ï¸ Painel Administrativo</h1>
				<p>Gerencie postagens, anÃºncios e conteÃºdo do site</p>
			</div>

			<!-- ADMIN TABS -->
			<div class="admin-tabs">
				<button
					class="admin-tab active"
					onclick="switchTab('tabNewPost', this)"
				>
					â• Nova Postagem
				</button>
				<button class="admin-tab" onclick="switchTab('tabNewAd', this)">
					ğŸ“¢ Novo AnÃºncio
				</button>
				<button
					class="admin-tab"
					onclick="switchTab('tabManage', this)"
				>
					ğŸ“‹ Gerenciar
				</button>
			</div>

			<!-- TAB: Nova Postagem -->
			<div class="tab-content active" id="tabNewPost">
				<form onsubmit="savePost(event)">
					<input type="hidden" id="editPostId" value="" />

					<div class="form-group">
						<label>TÃ­tulo da NotÃ­cia</label>
						<input
							type="text"
							id="postTitle"
							placeholder="Digite o tÃ­tulo da matÃ©ria..."
							required
						/>
					</div>

					<div class="form-row">
						<div class="form-group">
							<label>Categoria</label>
							<select id="postCategory" required>
								<option value="">Selecione...</option>
								<option value="PolÃ­tica">PolÃ­tica</option>
								<option value="Economia">Economia</option>
								<option value="EducaÃ§Ã£o">EducaÃ§Ã£o</option>
								<option value="SaÃºde">SaÃºde</option>
								<option value="Esporte">Esporte</option>
								<option value="Cultura">Cultura</option>
								<option value="OpiniÃ£o">OpiniÃ£o</option>
							</select>
						</div>

						<div class="form-group">
							<label>Autor</label>
							<input
								type="text"
								id="postAuthor"
								value="Cristiano Soares"
								required
							/>
						</div>
					</div>

					<div class="form-group">
						<label>Resumo / SubtÃ­tulo</label>
						<input
							type="text"
							id="postExcerpt"
							placeholder="Breve resumo da notÃ­cia..."
							required
						/>
					</div>

					<div class="form-group">
						<label>ConteÃºdo (Blocos)</label>
						<div class="block-toolbar">
							<button
								type="button"
								class="btn-block-add"
								onclick="addBlock('capa')"
							>
								ğŸ“· Capa
							</button>
							<button
								type="button"
								class="btn-block-add"
								onclick="addBlock('imageText')"
							>
								ğŸ–¼ï¸ Img+Texto
							</button>
							<button
								type="button"
								class="btn-block-add"
								onclick="addBlock('fullImage')"
							>
								ğŸ–¼ï¸ Img Full
							</button>
							<button
								type="button"
								class="btn-block-add"
								onclick="addBlock('video')"
							>
								ğŸ¥ VÃ­deo
							</button>
							<button
								type="button"
								class="btn-block-add"
								onclick="addBlock('text')"
							>
								ğŸ“ Texto
							</button>
							<button
								type="button"
								class="btn-block-add"
								onclick="addBlock('button')"
							>
								ğŸ”˜ BotÃ£o
							</button>
							<button
								type="button"
								class="btn-block-add"
								onclick="addBlock('ad')"
							>
								ğŸ“¢ AnÃºncio
							</button>
						</div>

						<div id="blocksContainer" class="blocks-container">
							<!-- Blocks will be injected here -->
						</div>
					</div>

					<div class="form-actions">
						<button
							type="button"
							class="btn-preview"
							onclick="previewPost()"
						>
							ğŸ‘ï¸ Visualizar PrÃ©via
						</button>
						<button
							type="submit"
							class="btn-primary"
							id="postSubmitBtn"
						>
							ğŸ“ Publicar NotÃ­cia
						</button>
					</div>
				</form>
			</div>

			<!-- TAB: Novo AnÃºncio -->
			<div class="tab-content" id="tabNewAd">
				<form onsubmit="saveAd(event)">
					<input type="hidden" id="editAdId" value="" />

					<div class="form-group">
						<label>TÃ­tulo do AnÃºncio</label>
						<input
							type="text"
							id="adTitle"
							placeholder="Ex: Vende-se apartamento..."
							required
						/>
					</div>

					<div class="form-group">
						<label>DescriÃ§Ã£o</label>
						<textarea
							id="adDescription"
							placeholder="Detalhes do anÃºncio..."
							required
						></textarea>
					</div>

					<div class="form-row">
						<div class="form-group">
							<label>Contato</label>
							<input
								type="text"
								id="adContact"
								placeholder="Telefone ou WhatsApp"
								required
							/>
						</div>

						<div class="form-group">
							<label>Categoria</label>
							<select id="adCategory">
								<option value="ImÃ³veis">ImÃ³veis</option>
								<option value="VeÃ­culos">VeÃ­culos</option>
								<option value="Empregos">Empregos</option>
								<option value="ServiÃ§os">ServiÃ§os</option>
								<option value="Diversos">Diversos</option>
							</select>
						</div>
					</div>

					<div class="form-group">
						<label>Imagem (URL)</label>
						<input
							type="url"
							id="adImage"
							placeholder="https://exemplo.com/imagem.jpg"
							oninput="previewImage(this.value, 'adImagePreview')"
						/>
						<img
							id="adImagePreview"
							class="image-preview"
							alt="Preview"
						/>
					</div>

					<button
						type="submit"
						class="btn-primary btn-orange"
						id="adSubmitBtn"
					>
						ğŸ“¢ Publicar AnÃºncio
					</button>
				</form>
			</div>

			<!-- TAB: Gerenciar -->
			<div class="tab-content" id="tabManage">
				<h4
					style="
						font-family: &quot;Montserrat&quot;, sans-serif;
						font-size: 0.9rem;
						font-weight: 700;
						margin-bottom: 16px;
						color: var(--teal-primary);
					"
				>
					ğŸ“° NotÃ­cias Publicadas
				</h4>
				<div class="admin-post-list" id="adminPostList">
					<!-- Populated by JS -->
				</div>

				<h4
					style="
						font-family: &quot;Montserrat&quot;, sans-serif;
						font-size: 0.9rem;
						font-weight: 700;
						margin: 28px 0 16px;
						color: var(--orange-warm);
					"
				>
					ğŸ“¢ AnÃºncios Publicados
				</h4>
				<div class="admin-post-list" id="adminAdList">
					<!-- Populated by JS -->
				</div>
			</div>
		</div>

		<!-- PREVIEW MODAL -->
		<div class="preview-modal" id="previewModal">
			<div class="preview-content">
				<div class="preview-header">
					<h3>ğŸ‘ï¸ VisualizaÃ§Ã£o PrÃ©via</h3>
					<button class="preview-close" onclick="closePreview()">
						âœ•
					</button>
				</div>
				<div class="preview-body" id="previewContainer">
					<!-- Preview will be rendered here -->
				</div>
			</div>
		</div>

		<!-- TOAST -->
		<div class="toast" id="toast"></div>

		<script type="module" src="js/main-admin.js"></script>
	</body>
</html>
